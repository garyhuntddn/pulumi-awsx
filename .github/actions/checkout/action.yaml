name: Check out the repositories
description: Checks out the pulumi-awsx and optionally the pulumi/scripts repos

inputs:
  scripts:
    description: Set to "false" to skip cloning the pulumi/scripts repo as well
  shallow:
    description: Set to "true" for a shallow clone without tags

runs:
  using: "composite"
  steps:
    - name: Checkout Repo
      uses: actions/checkout@v4
    - if: scripts != 'false'
      name: Checkout Scripts Repo
      uses: actions/checkout@v4
      with:
        path: ci-scripts
        repository: pulumi/scripts
    - if: shallow != 'false'
      name: Unshallow clone for tags
      run: git fetch --prune --unshallow --tags